<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hijab Fitsay | Elegan & Modern</title>
<style>
/* ------------------------------------------------
   Elegant Times New Roman UI with falling petals
   ------------------------------------------------ */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap'); /* fallback for some UI parts */

:root{
  --primary:#b63b6f;
  --accent:#ff4c86;
  --muted:#f7eef2;
  --card:#fff;
  --text:#222;
}

/* Use Times New Roman for main text */
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family:"Times New Roman", Times, serif;
  background:linear-gradient(180deg,#fff9fb,#fffefc);
  color:var(--text);
  margin:0;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}

/* falling petals container (absolute) */
.petals {
  pointer-events:none;
  position:fixed;
  inset:0;
  z-index:0;
  overflow:hidden;
}

/* single petal styles (will be injected by JS) */
.petal {
  position:absolute;
  width:28px;
  height:28px;
  background-repeat:no-repeat;
  background-size:contain;
  opacity:0.9;
  transform-origin:center;
  will-change:transform, top, left;
  animation-timing-function:linear;
  z-index:0;
}

/* Header */
.header {
  position:sticky;
  top:0;
  z-index:20;
  background:linear-gradient(90deg,#fff0f6,#fff3f7);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 20px;
  border-bottom:1px solid rgba(182,59,111,0.08);
  box-shadow:0 6px 20px rgba(0,0,0,0.03);
}
.brand {
  display:flex; gap:12px; align-items:center;
}
.brand img{width:48px;height:48px;border-radius:50%;object-fit:cover;box-shadow:0 6px 14px rgba(0,0,0,0.1)}
.brand h1{font-size:20px;margin:0;color:var(--primary);font-weight:700}

/* header right */
.controls {display:flex; gap:12px; align-items:center;}
.cart-btn {
  background:var(--accent);
  color:white;padding:10px;border-radius:50%;width:48px;height:48px;display:grid;place-items:center;
  box-shadow:0 6px 16px rgba(255,76,134,0.18);cursor:pointer;border:none;
  position:relative;font-weight:700;
}
.cart-count { position:absolute; top:-6px; right:-6px; background:#fff; color:var(--accent); font-weight:700; padding:4px 7px; border-radius:14px; font-size:12px; box-shadow:0 4px 12px rgba(0,0,0,0.08);}

/* Hero */
.hero {
  padding:70px 18px 40px;
  text-align:center;
  position:relative;
  z-index:1;
}
.hero .title{
  font-size:38px; color:var(--primary); margin-bottom:10px; letter-spacing:0.6px;
}
.hero .lead{
  max-width:760px;margin:0 auto 20px; color:#444; font-size:18px; line-height:1.6;
}
.hero .cta{ background:var(--primary); color:#fff; padding:12px 26px; border-radius:30px; border:none; cursor:pointer; font-weight:700; box-shadow:0 8px 24px rgba(182,59,111,0.12)}

/* Products grid */
.container{max-width:1180px;margin:30px auto;padding:0 18px; position:relative; z-index:2;}
.section-title{font-size:28px;color:var(--primary);text-align:center;margin-bottom:18px;font-weight:700}

/* grid */
.products {
  display:grid;
  gap:22px;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
}

/* card */
.card {
  background:var(--card);
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 8px 30px rgba(0,0,0,0.06);
  transition:transform .28s ease, box-shadow .28s ease;
}
.card:hover {transform:translateY(-8px); box-shadow:0 14px 40px rgba(0,0,0,0.09)}
.card img{width:100%;height:260px;object-fit:cover;display:block}
.card .info{padding:16px;text-align:center}
.card h3{margin:6px 0;color:var(--primary)}
.card p{color:#666;margin:6px 0 14px}
.card .actions{display:flex;gap:10px;justify-content:center}
.btn {
  border:none;padding:9px 16px;border-radius:24px;cursor:pointer;font-weight:700;
  transition:transform .18s;
}
.btn.add{background:#fff;border:1px solid var(--primary);color:var(--primary)}
.btn.buy{background:var(--primary);color:#fff}
.btn:hover{transform:translateY(-3px)}

/* Cart modal */
.modal {
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,0.45); z-index:40; padding:20px;
}
.modal .panel {
  width:100%; max-width:720px; background:#fff; border-radius:12px; padding:18px; box-shadow:0 20px 60px rgba(0,0,0,0.18); max-height:90vh; overflow:auto;
}
.cart-list{list-style:none;padding:0;margin:0}
.cart-item{display:flex;gap:12px;align-items:center;padding:10px 0;border-bottom:1px dashed #eee}
.cart-item img{width:70px;height:70px;object-fit:cover;border-radius:8px}
.qty-control{display:flex;align-items:center;gap:8px}
.qty-control button{padding:6px 8px;border-radius:8px;border:1px solid #ddd;background:#fafafa;cursor:pointer}
.total-row{display:flex;justify-content:space-between;align-items:center;margin-top:12px;font-weight:700;padding-top:8px}

/* Checkout form */
.checkout-form{display:grid;gap:10px;margin-top:12px}
.checkout-form input, .checkout-form textarea, .checkout-form select{
  padding:10px;border-radius:8px;border:1px solid #ddd;font-family:inherit;
}
.small-note{font-size:13px;color:#666}

/* Confirmation area */
.confirmation { text-align:center; padding:18px }
.confirmation h3{color:var(--primary); margin-bottom:6px}
.confirmation .status {font-weight:700;color:green;margin-bottom:12px}

/* footer */
footer{padding:28px;text-align:center;color:#fff;background:linear-gradient(180deg,#6d1b3b,#4b1230);margin-top:40px}

/* responsive tweaks */
@media(max-width:600px){
  .hero .title{font-size:26px}
  .card img{height:200px}
  .cart-item img{width:58px;height:58px}
}

/* small helper */
.hidden{display:none}
</style>
</head>
<body>

<!-- Petals (injected by JS) -->
<div class="petals" id="petals"></div>

<header class="header" role="banner">
  <div class="brand">
    <img src="imagess/gambar0.jpeg" alt="Logo">
    <h1>Hijab Fitsay</h1>
  </div>
  <div class="controls">
    <button class="cart-btn" id="cartBtn" aria-label="Buka keranjang">
      üõçÔ∏è
      <span class="cart-count" id="cartCount">0</span>
    </button>
  </div>
</header>

<main>
  <section class="hero" id="home">
    <div style="max-width:920px;margin:0 auto">
      <div class="title">Tampil Anggun & Elegan ‚Äî Hijab Fitsay</div>
      <p class="lead">Keanggunan yang lembut hadir dalam setiap lipatan. Pilih hijab berkualitas dengan warna pastel elegan, nyaman dipakai seharian, dan cocok untuk acara spesial.</p>
      <div style="display:flex;gap:12px;justify-content:center">
        <button class="cta" onclick="scrollToProducts()">Belanja Sekarang</button>
      </div>
    </div>
  </section>

  <section class="container" id="produk">
    <h2 class="section-title">Koleksi Terbaru</h2>
    <div class="products" id="productsGrid">
      <!-- product cards injected by JS -->
    </div>
  </section>

  <!-- Checkout / confirmation area (after purchase) -->
  <section class="container" id="afterCheckout" style="display:none; margin-top:28px;">
    <div class="card panel">
      <div id="confirmationArea"></div>
    </div>
  </section>
</main>

<!-- Cart Modal -->
<div class="modal" id="cartModal" role="dialog" aria-modal="true">
  <div class="panel">
    <h2>Keranjang Belanja</h2>
    <ul class="cart-list" id="cartList"></ul>

    <div class="total-row">
      <div>Total:</div>
      <div id="cartTotal">Rp 0</div>
    </div>

    <div style="display:flex;gap:10px;margin-top:14px;justify-content:flex-end">
      <button class="btn add" id="closeCart">Tutup</button>
      <button class="btn buy" id="toCheckout">Checkout</button>
    </div>
  </div>
</div>

<!-- Checkout Modal -->
<div class="modal" id="checkoutModal">
  <div class="panel">
    <h2>Form Pembelian</h2>

    <form id="checkoutForm" class="checkout-form">
      <input type="text" id="buyerName" placeholder="Nama Lengkap" required />
      <input type="tel" id="buyerPhone" placeholder="Nomor HP (contoh: 0812xxxxxx)" required />
      <textarea id="buyerAddress" placeholder="Alamat Lengkap (jalan, kec, kota)" rows="2" required></textarea>

      <label for="paymentMethod" class="small-note">Pilih Metode Pembayaran:</label>
      <select id="paymentMethod" required>
        <option value="">-- Pilih Metode --</option>
        <option value="BCA">Bank BCA</option>
        <option value="DANA">DANA</option>
        <option value="OVO">OVO</option>
        <option value="COD">COD (Bayar di Tempat)</option>
        <option value="Bank Lain">Bank Lainnya</option>
      </select>

      <div id="paymentInstruction" class="small-note" style="padding:8px;background:#fff7fb;border-radius:8px;border:1px solid #fde6ee; display:none"></div>

      <label class="small-note">Catatan (opsional):</label>
      <input id="buyerNote" placeholder="Contoh: minta ukuran agak besar / warna tertentu (opsional)">

      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:6px">
        <button type="button" class="btn add" id="backToCart">Kembali ke Keranjang</button>
        <button type="submit" class="btn buy">Kirim Pesanan</button>
      </div>
    </form>
  </div>
</div>

<footer>
  <div style="max-width:980px;margin:0 auto">
    <div style="margin-bottom:10px">Ikuti kami di Instagram & TikTok ‚Äî @si_sayidah</div>
    <div style="font-size:13px;opacity:0.9">Hubungi: <a href="https://wa.me/qr/J6GIGWQFZRQAE1" style="color:#fff;text-decoration:underline">WhatsApp Toko</a></div>
    <div style="margin-top:12px;font-size:13px">¬© 2025 Hijab Fitsay ‚Ä¢ Desain oleh Fitri</div>
  </div>
</footer>

<script>
/* ---------------------------
   DATA PRODUK (ubah sesuai file gambar)
   --------------------------- */
const PRODUCTS = [
  { id:1, name:"Hijab Pastel Blossom", price:89000, img:"images/gambar1.jpeg" },
  { id:2, name:"Hijab Soft Cream", price:75000, img:"images/gambar2.jpeg" },
  { id:3, name:"Hijab Dusty Pink", price:95000, img:"images/gambar3.jpeg" },
  { id:4, name:"Hijab Olive Serenity", price:85000, img:"imagess/hijab0.jpeg" },
  { id:5, name:"Hijab Sky Mist", price:82000, img:"imagess/hijab1 (3).jpeg" }
];

/* ---------------------------
   Simple helper functions
   --------------------------- */
const rupiah = v => "Rp " + v.toLocaleString('id-ID');

/* ---------------------------
   Render produk
   --------------------------- */
const productsGrid = document.getElementById('productsGrid');
function renderProducts(){
  productsGrid.innerHTML = '';
  PRODUCTS.forEach(p => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${p.img}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/600x400?text=Image'">
      <div class="info">
        <h3>${p.name}</h3>
        <p>${rupiah(p.price)}</p>
        <div class="actions">
          <button class="btn add" data-id="${p.id}" onclick="addToCart(${p.id})">Tambah ke Keranjang</button>
          <button class="btn buy" onclick="buyNow(${p.id})">Beli Sekarang</button>
        </div>
      </div>`;
    productsGrid.appendChild(card);
  });
}
renderProducts();

/* ---------------------------
   Cart logic (localStorage)
   --------------------------- */
let cart = JSON.parse(localStorage.getItem('hf_cart_v1')) || [];
const cartCountEl = document.getElementById('cartCount');
const cartModal = document.getElementById('cartModal');
const checkoutModal = document.getElementById('checkoutModal');
const cartListEl = document.getElementById('cartList');
const cartTotalEl = document.getElementById('cartTotal');

function saveCart(){
  localStorage.setItem('hf_cart_v1', JSON.stringify(cart));
  updateCartUI();
}

function updateCartUI(){
  cartCountEl.textContent = cart.reduce((s,i)=>s+i.qty,0);
  renderCartList();
}

function renderCartList(){
  cartListEl.innerHTML = '';
  if(cart.length===0){
    cartListEl.innerHTML = '<li class="small-note">Keranjang kosong.</li>';
    cartTotalEl.textContent = rupiah(0);
    return;
  }
  let total = 0;
  cart.forEach((item, idx) => {
    total += item.qty * item.price;
    const li = document.createElement('li');
    li.className = 'cart-item';
    li.innerHTML = `
      <img src="${item.img}" onerror="this.src='https://via.placeholder.com/120x120?text=Img'">
      <div style="flex:1">
        <div style="font-weight:700;color:var(--primary)">${item.name}</div>
        <div class="small-note">${rupiah(item.price)} x ${item.qty} = ${rupiah(item.price * item.qty)}</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
        <div class="qty-control">
          <button onclick="changeQty(${idx}, -1)" aria-label="Kurangi">‚àí</button>
          <div style="min-width:28px;text-align:center">${item.qty}</div>
          <button onclick="changeQty(${idx}, 1)" aria-label="Tambah">+</button>
        </div>
        <button onclick="removeItem(${idx})" style="background:transparent;border:none;color:#c33;cursor:pointer">Hapus</button>
      </div>
    `;
    cartListEl.appendChild(li);
  });
  cartTotalEl.textContent = rupiah(total);
}

function addToCart(productId){
  const p = PRODUCTS.find(x => x.id===productId);
  if(!p) return;
  const exists = cart.find(i=>i.id===p.id);
  if(exists) exists.qty++;
  else cart.push({ id:p.id, name:p.name, price:p.price, qty:1, img:p.img });
  saveCart();
  showToast(`${p.name} ditambahkan ke keranjang`);
}

function buyNow(productId){
  // replace cart with single product then open checkout
  const p = PRODUCTS.find(x => x.id===productId);
  if(!p) return;
  cart = [{ id:p.id, name:p.name, price:p.price, qty:1, img:p.img }];
  saveCart();
  openCheckout();
}

/* cart controls */
function changeQty(index, delta){
  if(!cart[index]) return;
  cart[index].qty += delta;
  if(cart[index].qty < 1) cart[index].qty = 1;
  saveCart();
}
function removeItem(index){
  if(!cart[index]) return;
  cart.splice(index,1);
  saveCart();
}

/* show cart modal */
document.getElementById('cartBtn').addEventListener('click', ()=>{ openCart(); });
document.getElementById('closeCart').addEventListener('click', ()=>{ closeCart(); });
function openCart(){ renderCartList(); cartModal.style.display='flex'; }
function closeCart(){ cartModal.style.display='none'; }

/* Checkout flow */
document.getElementById('toCheckout').addEventListener('click', ()=>{ openCheckout(); });
document.getElementById('backToCart').addEventListener('click', ()=>{ checkoutModal.style.display='none'; cartModal.style.display='flex'; });

function openCheckout(){
  if(cart.length===0){ alert('Keranjang kosong! Silakan tambahkan produk.'); return; }
  cartModal.style.display='none';
  checkoutModal.style.display='flex';
  updatePaymentInstruction(); // reset instruction based on default
}

/* payment instruction */
const paymentMethodEl = document.getElementById('paymentMethod');
const paymentInstructionEl = document.getElementById('paymentInstruction');

paymentMethodEl.addEventListener('change', updatePaymentInstruction);
function updatePaymentInstruction(){
  const v = paymentMethodEl.value;
  paymentInstructionEl.style.display = v ? 'block':'none';
  if(!v){ paymentInstructionEl.innerHTML = ''; return; }
  let html = '';
  if(v === 'BCA'){
    html = `<strong>Instruksi BCA:</strong><br>Transfer ke: <strong>BCA 123-456-789 a.n. Hijab Fitsay</strong><br>Konfirmasi via WhatsApp setelah transfer.`;
  } else if(v === 'DANA'){
    html = `<strong>Instruksi DANA:</strong><br>Transfer ke nomor <strong>0812-3456-7890 (DANA)</strong>. Konfirmasi via WhatsApp.`;
  } else if(v === 'OVO'){
    html = `<strong>Instruksi OVO:</strong><br>Transfer ke nomor <strong>0812-3456-7890 (OVO)</strong>. Konfirmasi via WhatsApp.`;
  } else if(v === 'COD'){
    html = `<strong>COD:</strong><br>Pembayaran akan dilakukan saat pesanan diterima (Bayar di Tempat). Siapkan uang pas agar mudah.`;
  } else {
    html = `<strong>Bank Lainnya:</strong><br>Silakan pilih transfer bank lain; sebutkan bank dan konfirmasi via WhatsApp.`;
  }
  paymentInstructionEl.innerHTML = html;
}

/* Checkout submit */
document.getElementById('checkoutForm').addEventListener('submit', function(e){
  e.preventDefault();
  const name = document.getElementById('buyerName').value.trim();
  const phone = document.getElementById('buyerPhone').value.trim();
  const address = document.getElementById('buyerAddress').value.trim();
  const method = paymentMethodEl.value;
  const note = document.getElementById('buyerNote').value.trim();

  if(!name || !phone || !address || !method){ alert('Harap lengkapi semua data'); return; }

  // build order summary
  let total = 0;
  let itemsText = '';
  cart.forEach(it=>{
    total += it.price * it.qty;
    itemsText += `- ${it.name} x${it.qty} = ${rupiah(it.price * it.qty)}\n`;
  });

  const order = {
    id: 'HF' + Date.now(),
    name, phone, address, method, note, items: cart, total, created: new Date().toISOString()
  };

  // show confirmation area
  showConfirmation(order);

  // clear cart
  cart = [];
  saveCart();

  // close checkout modal
  checkoutModal.style.display = 'none';
});

/* show confirmation and WA link */
function showConfirmation(order){
  document.getElementById('afterCheckout').style.display = 'block';
  const area = document.getElementById('confirmationArea');
  // build html
  let itemsHtml = '<ul style="text-align:left;padding-left:18px">';
  order.items.forEach(it=>{
    itemsHtml += `<li>${it.name} ‚Äî ${it.qty} x ${rupiah(it.price)} = <strong>${rupiah(it.price * it.qty)}</strong></li>`;
  });
  itemsHtml += '</ul>';

  area.innerHTML = `
    <div class="confirmation">
      <h3>Terima kasih ‚Äî Pesanan Diterima</h3>
      <div class="status">Pesanan Terkonfirmasi ‚úÖ</div>
      <div style="text-align:left;max-width:720px;margin:0 auto">
        <p><strong>No. Pesanan:</strong> ${order.id}</p>
        <p><strong>Nama:</strong> ${order.name}</p>
        <p><strong>No. HP:</strong> ${order.phone}</p>
        <p><strong>Alamat:</strong> ${order.address}</p>
        <p><strong>Metode Pembayaran:</strong> ${order.method}</p>
        ${order.note ? `<p><strong>Catatan:</strong> ${order.note}</p>` : ''}
        <h4>Detail Produk:</h4>
        ${itemsHtml}
        <p style="font-weight:700">Total Pembayaran: ${rupiah(order.total)}</p>

        <div style="display:flex;gap:10px;justify-content:center;margin-top:12px">
          <a id="waLink" class="btn buy" style="text-decoration:none;color:#fff" target="_blank">Konfirmasi via WhatsApp</a>
          <button class="btn add" onclick="printNota()">Cetak / Simpan Nota</button>
        </div>
        <p class="small-note" style="margin-top:10px">Setelah melakukan transfer, silakan konfirmasi pembayaran via WhatsApp agar pesanan segera diproses.</p>
      </div>
    </div>
  `;

  // prepare WA message (auto)
  const waNumber = '6281234567890'; // <-- Ganti dengan nomor admin/toko (format internasional tanpa +)
  let waText = `Halo%20Hijab%20Fitsay%2C%0ASaya%20telah%20melakukan%20pemesanan%20dari%20website.%0A%0A`;
  waText += `NoPesanan%3A%20${encodeURIComponent(order.id)}%0A`;
  waText += `Nama%3A%20${encodeURIComponent(order.name)}%0A`;
  waText += `NoHP%3A%20${encodeURIComponent(order.phone)}%0A`;
  waText += `Alamat%3A%20${encodeURIComponent(order.address)}%0A`;
  waText += `Pembayaran%3A%20${encodeURIComponent(order.method)}%0A`;
  waText += `Total%3A%20${encodeURIComponent(rupiah(order.total))}%0A%0A`;
  waText += `Produk%3A%0A`;
  order.items.forEach(it=>{
    waText += `${encodeURIComponent(it.name)}%20x${it.qty}%20-%20${encodeURIComponent(rupiah(it.price * it.qty))}%0A`;
  });
  if(order.note) waText += `%0ACatatan%3A%20${encodeURIComponent(order.note)}%0A`;

  const waUrl = `https://wa.me/${waNumber}?text=${waText}`;
  document.getElementById('waLink').href = waUrl;
}

/* print/save nota */
function printNota(){
  window.print();
}

/* simple toast */
function showToast(msg){
  const t = document.createElement('div');
  t.textContent = msg;
  t.style.position='fixed';
  t.style.right='20px';
  t.style.bottom='20px';
  t.style.background='rgba(0,0,0,0.75)';
  t.style.color='#fff';
  t.style.padding='10px 14px';
  t.style.borderRadius='10px';
  t.style.zIndex='60';
  document.body.appendChild(t);
  setTimeout(()=>{ t.style.opacity='0'; t.style.transition='opacity .6s'; setTimeout(()=>t.remove(),650) },2000);
}

/* init */
updateCartUI();

/* helper scroll to products */
function scrollToProducts(){ document.getElementById('produk').scrollIntoView({behavior:'smooth'}) }

/* ---------------------------
   Falling petals generator
   --------------------------- */
const PETAL_IMAGES = [
  // You can replace these data URIs with your own small petal images hosted locally
  // For simplicity we use SVG data URIs with pastel colors
  'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="%23ffccd9" d="M14 0 C9 6 2 6 0 14 C6 12 12 18 14 28 C16 18 22 12 28 14 C26 6 19 6 14 0Z"/></svg>',
  'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="%23ffe7f0" d="M14 0 C9 6 2 6 0 14 C6 12 12 18 14 28 C16 18 22 12 28 14 C26 6 19 6 14 0Z"/></svg>',
  'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="%23f3e0ff" d="M14 0 C9 6 2 6 0 14 C6 12 12 18 14 28 C16 18 22 12 28 14 C26 6 19 6 14 0Z"/></svg>'
];

const petalsContainer = document.getElementById('petals');

function spawnPetal(){
  const p = document.createElement('div');
  p.className='petal';
  const img = PETAL_IMAGES[Math.floor(Math.random()*PETAL_IMAGES.length)];
  p.style.backgroundImage = `url('${img}')`;
  const startLeft = Math.random()*110 - 5; // -5% to 105%
  const duration = 8000 + Math.random()*9000; // 8s-17s
  const delay = Math.random()*3000;
  p.style.left = startLeft + '%';
  p.style.top = '-6%';
  p.style.opacity = (0.6 + Math.random()*0.4);
  p.style.transform = `rotate(${Math.random()*360}deg)`;
  p.style.animation = `fall ${duration}ms linear ${delay}ms forwards`;
  // random size
  const size = 18 + Math.random()*18;
  p.style.width = size+'px';
  p.style.height = size+'px';
  // horizontal drift using CSS animation via JS keyframes fallback: animate via JS
  // We'll implement a simple JS-driven fall using requestAnimationFrame
  petalsContainer.appendChild(p);

  // JS-driven animation for better control
  const start = performance.now() + delay;
  const startX = (startLeft/100) * window.innerWidth;
  const amplitude = 60 + Math.random()*80; // sway
  const phase = Math.random()*Math.PI*2;
  function animate(now){
    if(now < start){ requestAnimationFrame(animate); return; }
    const t = (now - start) / duration;
    if(t > 1){ p.remove(); return; }
    const y = t * (window.innerHeight + 200) - 50;
    const x = startX + Math.sin(t*2*Math.PI + phase)*amplitude;
    p.style.transform = `translate(${x}px, ${y}px) rotate(${t*720 + phase*30}deg)`;
    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}

// periodically spawn petals
setInterval(()=>{ spawnPetal(); }, 450);
for(let i=0;i<12;i++){ setTimeout(spawnPetal, i*300); }

/* keep cart UI in sync if user reloads or changes in other tabs */
window.addEventListener('storage', ()=>{ cart = JSON.parse(localStorage.getItem('hf_cart_v1')) || []; updateCartUI(); });

</script>
</body>
</html>
